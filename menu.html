<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OurCheff Menu Builder</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #fff6d9;
      margin: 0;
      padding: 0;
    }
    .header {
      background-color: #fff;
      padding: 15px 20px;
      display: flex;
      align-items: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .header img {
      height: 48px;
      margin-right: 15px;
    }
    .header h1 {
      margin: 0;
      color: #dc4d42;
      font-size: 28px;
    }
    .header p {
      margin: 0;
      margin-left: 10px;
      color: #666;
      font-size: 14px;
    }
    .dashboard {
      display: flex;
      padding: 20px;
    }
    .recipes-panel {
      width: 25%;
      background-color: #fff;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 15px;
      margin-right: 20px;
      max-height: calc(100vh - 100px);
      overflow-y: auto;
    }
    .recipes-panel h2 {
      margin-top: 0;
      color: #dc4d42;
    }
    .recipes-panel input[type="text"] {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
      margin-bottom: 10px;
    }
    .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      margin-bottom: 10px;
    }
    .filters button {
      background-color: #f4b400;
      border: none;
      color: #000;
      padding: 6px 10px;
      border-radius: 4px;
      font-size: 12px;
      cursor: pointer;
    }
    .recipe-list {
      max-height: 500px;
      overflow-y: auto;
    }
    .recipe-item {
      background-color: #ececec;
      padding: 6px;
      border-radius: 4px;
      margin-bottom: 6px;
      cursor: grab;
      font-size: 13px;
    }
    .menu-panel {
      flex: 1;
      background-color: #fff;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 15px;
      max-height: calc(100vh - 100px);
      overflow-y: auto;
    }
    .menu-panel h2 {
      margin-top: 0;
      color: #dc4d42;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 10px;
    }
    th, td {
      padding: 8px;
      border-bottom: 1px solid #eee;
      text-align: left;
      font-size: 14px;
    }
    th {
      background-color: #f9f9f9;
      color: #444;
    }
    .dropzone {
      min-height: 30px;
      border: 1px dashed #ccc;
      padding: 4px;
      border-radius: 4px;
    }
    .recipe-chip {
      display: inline-block;
      background-color: #f8d7da;
      color: #a94442;
      padding: 3px 5px;
      border-radius: 4px;
      margin-right: 4px;
      margin-bottom: 2px;
      font-size: 12px;
    }
    .recipe-chip span {
      margin-left: 6px;
      cursor: pointer;
      color: #a94442;
    }
    .actions {
      display: flex;
      gap: 6px;
      margin-bottom: 15px;
    }
    .actions button {
      background-color: #dc4d42;
      color: #fff;
      border: none;
      padding: 6px 10px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
    }
  </style>
</head>
<body>
  <div class="header">
    <img src="https://dummyimage.com/60x60/cccccc/000000.png&text=logo" alt="OurCheff logo">
    <h1>OurCheff</h1>
    <p>The extra F is for fun!</p>
  </div>
  <div class="dashboard">
    <div class="recipes-panel">
      <h2>Recipes</h2>
      <input type="text" placeholder="Search recipes..." id="searchBox">
      <div class="filters">
        <button onclick="toggleFilter('Breakfast')">Breakfast</button>
        <button onclick="toggleFilter('Lunch')">Lunch</button>
        <button onclick="toggleFilter('Dinner')">Dinner</button>
        <button onclick="toggleFilter('Snack')">Snack</button>
      </div>
      <div class="recipe-list" id="recipeList">
        <!-- Recipe items will be inserted here -->
      </div>
    </div>
    <div class="menu-panel">
      <h2>Menu Builder</h2>
      <div class="actions">
        <button onclick="addMeal()">Add Meal</button>
        <button onclick="saveMenu()">Save Menu</button>
        <button onclick="loadLastMenu()">Load Last Menu</button>
        <button onclick="showGroceryList()">Grocery List</button>
      </div>
      <table id="menuTable">
        <thead>
          <tr>
            <th>Meal #</th>
            <th>Recipes</th>
            <th>Orig. Serv.</th>
            <th>Scaled Serv.</th>
            <th>Labels</th>
          </tr>
        </thead>
        <tbody id="menuBody">
          <!-- Meal rows go here -->
        </tbody>
      </table>
    </div>
  </div>
  <script>
    // Dummy recipes to demonstrate layout
    const recipes = [
      { id: 1, title: 'Heavy-on-the-Veggies Chicken and Vegetable Stir Fry', category: 'Dinner' },
      { id: 2, title: 'Chili-Garlic Glazed Salmon with Sautéed Green Beans & Mushrooms', category: 'Dinner' },
      { id: 3, title: 'Smoky Chipotle Chicken & Veggie Skillet', category: 'Lunch' },
      { id: 4, title: 'Korean-Inspired Beef Bulgogi Bowls over Cauliflower Rice', category: 'Dinner' },
      { id: 5, title: 'Pulled BBQ Chicken Stuffed Sweet Potato', category: 'Dinner' },
      { id: 6, title: 'Vietnamese Inspired Salad', category: 'Lunch' },
      { id: 7, title: 'Spicy Chicken Wrap', category: 'Lunch' },
      { id: 8, title: 'Breakfast Bowl', category: 'Breakfast' },
      { id: 9, title: 'BBQ Chicken Flatbread', category: 'Lunch' },
      { id: 10, title: 'Grilled Lemon Herb Chicken', category: 'Dinner' }
    ];
    let activeFilters = [];
    let mealCounter = 1;
    function initRecipes() {
      const list = document.getElementById('recipeList');
      list.innerHTML = '';
      const search = document.getElementById('searchBox').value.toLowerCase();
      recipes.forEach(rec => {
        if ((activeFilters.length === 0 || activeFilters.includes(rec.category)) && rec.title.toLowerCase().includes(search)) {
          const item = document.createElement('div');
          item.className = 'recipe-item';
          item.textContent = rec.title;
          item.draggable = true;
          item.dataset.id = rec.id;
          item.dataset.title = rec.title;
          item.addEventListener('dragstart', (e) => {
            e.dataTransfer.setData('text/plain', JSON.stringify({id: rec.id, title: rec.title}));
          });
          list.appendChild(item);
        }
      });
    }
    function toggleFilter(cat) {
      const idx = activeFilters.indexOf(cat);
      if (idx > -1) activeFilters.splice(idx, 1); else activeFilters.push(cat);
      initRecipes();
    }
    document.getElementById('searchBox').addEventListener('input', initRecipes);
    function addMeal() {
      const tbody = document.getElementById('menuBody');
      const row = document.createElement('tr');
      const mealCell = document.createElement('td');
      mealCell.textContent = 'Meal ' + mealCounter;
      mealCounter++;
      const recipesCell = document.createElement('td');
      const dropzone = document.createElement('div');
      dropzone.className = 'dropzone';
      dropzone.addEventListener('dragover', (e) => { e.preventDefault(); });
      dropzone.addEventListener('drop', (e) => {
        e.preventDefault();
        const data = JSON.parse(e.dataTransfer.getData('text/plain'));
        addRecipeToRow(dropzone, data.title);
      });
      recipesCell.appendChild(dropzone);
      const origCell = document.createElement('td');
      origCell.textContent = '';
      const scaledCell = document.createElement('td');
      const scaledInput = document.createElement('input');
      scaledInput.type = 'number';
      scaledInput.min = '1';
      scaledInput.value = '1';
      scaledInput.style.width = '50px';
      scaledCell.appendChild(scaledInput);
      const labelCell = document.createElement('td');
      const labelInput = document.createElement('input');
      labelInput.type = 'number';
      labelInput.min = '1';
      labelInput.value = '1';
      labelInput.style.width = '50px';
      labelCell.appendChild(labelInput);
      row.appendChild(mealCell);
      row.appendChild(recipesCell);
      row.appendChild(origCell);
      row.appendChild(scaledCell);
      row.appendChild(labelCell);
      tbody.appendChild(row);
    }
    function addRecipeToRow(dropzone, title) {
      const chip = document.createElement('span');
      chip.className = 'recipe-chip';
      chip.textContent = title;
      const remove = document.createElement('span');
      remove.textContent = '×';
      remove.addEventListener('click', () => {
        chip.remove();
      });
      chip.appendChild(remove);
      dropzone.appendChild(chip);
    }
    function saveMenu() {
      alert('Save menu feature to be implemented.');
    }
    function loadLastMenu() {
      alert('Load last menu feature to be implemented.');
    }
    function showGroceryList() {
      alert('Grocery list generation to be implemented.');
    }
    // Initialize on load
    window.addEventListener('DOMContentLoaded', () => {
      initRecipes();
      addMeal();
    });
  </script>
  <script>
// ... existing functions ...

function showGroceryList(menuId) {
  // Navigate to the grocery list page, passing both menuId and the backend API URL.
  window.location.href = `grocery.html?menuId=${menuId}&api=https://ourcheff-backend.onrender.com`;
}
</script>

</body>
</html>
function showGroceryList(menuId) {
  // Change apiBase to match your backend URL if needed
  window.location.href = `grocery.html?menuId=${menuId}&api=https://ourcheff-backend.onrender.com`;
}
function showGroceryList(menuId) {
  // Navigate to the grocery list page, passing the menuId and your backend API URL
  window.location.href = `grocery.html?menuId=${menuId}&api=https://ourcheff-backend.onrender.com`;
}
